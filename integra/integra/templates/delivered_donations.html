{% extends 'base.html' %}
{% block content %}
<h1>Minhas Doações</h1>
  <ul>
    <h2>Pendentes </h2>
    {% for donate in donates %}      
      {% if donate.author.id == user.id %}
        {% if donate.closed == False %}
          {{ donate }}
          <br/>{{ donate.message }} - {{donate.created_at|date:'d/m/y'}} às {{donate.created_at|date:'H:i'}}
          {% if donate.notify == False %}
            {% if donate.donation_type.id == 2 %}
              <br/><a data-bs-toggle="modal" data-bs-target="#myModal" class="btn btn-secondary">Entregue</a>
            {% else %}
            <br/><a href="#" class="btn btn-secondary">Pagar</a>  
            {% endif %}        
          {% endif %}
          <hr>
        {% endif %}
      {% endif %}
    {% endfor %}

    <h2>Concluidas </h2>
    {% for donate in donates %}      
      {% if donate.author.id == user.id %}
        {% if donate.closed %}
          {{ donate }}
          <br/>{{ donate.message }} - {{donate.created_at|date:'d/m/y'}} às {{donate.created_at|date:'H:i'}}
          <hr>
        {% endif %}
      {% endif %}
    {% endfor %}
  </ul>
  <ul>
    {% for donate in object_list %} 
      {% if donate.id == pk %}
        {{ donate }}
      {% endif %}
    {% endfor %}  
  </ul>
  <div class="modal hide fade in" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">Confirmar entrega?</h5>
        </div>
        <div class="modal-body">
          <p>Tem certeza que deseja confirmar a entrega</p>
            <form method="POST">
              {% csrf_token %}
              {{ form.as_p }}
              <button class="btn btn-primary">Confirmar</button>
            </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}